@using SHUNetMVC.Abstraction.Model.View
@using Newtonsoft.Json
@model GridListModel


<thead>
    <tr>
        @foreach (var column in Model.ColumnDefinitions.Where(o => o.Type != ColumnType.Id))
        {
            var isFiltered = Model.FilterList.AnyFilter(column.Id);
            var filteredCls = isFiltered ? "filtered" : "";

            <th class="dropdown">
                <div class="column-title @filteredCls" data-bs-toggle="dropdown" style="width:100%">
                    <div>
                        @column.Name
                        @if (Model.FilterList.OrderBy == $"{column.Id} asc")
                        {
                            <i class="fa-solid fa-arrow-up ms-1"></i>
                        }
                        else if (Model.FilterList.OrderBy == $"{column.Id} desc")
                        {
                            <i class="fa-solid fa-arrow-down ms-1"></i>
                        }
                    </div>
                   
                  

                </div>
                <div class="dropdown-menu" style="width:250px">

                    <a class="dropdown-item d-flex align-items-center pe-2" href="#" onclick="@(Model.GridJsVar).setOrderBy('@column.Id', 'asc')">
                        <i class="fa fa-arrow-down-a-z"></i> Sort Ascending (A-Z)

                        @if (Model.FilterList.OrderBy == $"{column.Id} asc")
                        {
                            <i class="fa fa-check ms-auto"></i>
                        }

                    </a>

                    <a class="dropdown-item d-flex align-items-center pe-2" href="#" onclick="@(Model.GridJsVar).setOrderBy('@column.Id', 'desc')">
                        <i class="fa fa-arrow-up-a-z"></i>Sort Descending (Z-A)
                        @if (Model.FilterList.OrderBy == $"{column.Id} desc")
                        {
                            <i class="fa fa-check ms-auto"></i>
                        }

                    </a>

                    <div class="dropdown-divider"></div>

                    @if (isFiltered)
                    {
                        <a class="dropdown-item fw-semibold" href="#" onclick="@(Model.GridJsVar).clearFilter('@column.Id')"> <i class="fa fa-xmark"></i>Clear Filter from @column.Name</a>
                    }
                    else
                    {
                        <a class="dropdown-item disabled" href="#"> <i class="fa fa-xmark"></i>Clear Filter from @column.Name</a>
                    }


                    @if (column.Type == ColumnType.String)
                    {
                        <a class="dropdown-item" href="#" onclick="@(Model.GridJsVar).textFilter.showDialog('@column.Id')">
                            <i class="fa fa-pen-to-square"></i>Text Filter
                        </a>
                    }
                    else if (column.Type == ColumnType.Number)
                    {
                        <a class="dropdown-item" href="#" onclick="@(Model.GridJsVar).numberFilter.showDialog('@column.Id')">
                            <i class="fa fa-pen-to-square"></i>Number Filter
                        </a>
                    }


                    <a class="dropdown-item" href="#" onclick="@(Model.GridJsVar).adaptiveFilter.showDialog('@column.Id','@Model.UsernameSession')">
                        <i class="fa fa-filter"></i>Filter..
                    </a>
                </div>
            </th>
        }

        @if (!Model.IsForLookup)
        {
            <th style="width:1px"></th>
        }

    </tr>
</thead>